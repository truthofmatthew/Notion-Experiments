(()=>{var t={45:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.handleDateMentions=function(t){console.log(`${i.LOG_PREFIX} Handling date mentions, persianInput =`,t);let e=0;try{if(t){!function(){try{const t=localStorage.getItem(i.PANEL_STATE_KEY);if(t){const e=JSON.parse(t);c=e.hidden,e.position&&(E=e.position)}}catch(t){console.error("Error loading panel state:",t)}}(),function(){if(a&&document.body.contains(a))return;a=document.createElement("div"),a.id=i.PANEL_ID,a.style.cssText=`\n    position: fixed;\n    ${E.bottom?"bottom: "+E.bottom+";":""}\n    ${E.right?"right: "+E.right+";":""}\n    ${E.top?"top: "+E.top+";":""}\n    ${E.left?"left: "+E.left+";":""}\n    width: 280px;\n    max-height: 400px;\n    background: #ffffff;\n    border-radius: 8px;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, sans-serif;\n    z-index: 9999;\n    overflow: hidden;\n    display: flex;\n    flex-direction: column;\n    transition: opacity 0.2s ease, transform 0.2s ease;\n  `;const t=document.createElement("div");t.style.cssText="\n    padding: 12px 16px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    cursor: move;\n    background: #f7f6f3;\n  ",t.innerHTML=`\n    <div style="font-weight: 600; font-size: 14px;">${i.PANEL_TITLE}</div>\n    <div style="display: flex; gap: 8px;">\n      <button id="${i.MINIMIZE_BTN_ID}" style="\n        background: none;\n        border: none;\n        cursor: pointer;\n        font-size: 16px;\n        padding: 0;\n        width: 24px;\n        height: 24px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      ">‚àí</button>\n      <button id="${i.HIDE_BTN_ID}" style="\n        background: none;\n        border: none;\n        cursor: pointer;\n        font-size: 16px;\n        padding: 0;\n        width: 24px;\n        height: 24px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      ">√ó</button>\n    </div>\n  `,a.appendChild(t);const e=document.createElement("div");e.id=i.CONTENT_ID,e.style.cssText="\n    padding: 16px;\n    overflow-y: auto;\n    max-height: 340px;\n    display: block;\n  ",a.appendChild(e),document.body.appendChild(a),function(t,e){let n=0,o=0,r=0,i=0;function a(t){t.preventDefault(),r=t.clientX,i=t.clientY,document.onmouseup=s,document.onmousemove=l}function l(e){e.preventDefault(),n=r-e.clientX,o=i-e.clientY,r=e.clientX,i=e.clientY,t.style.top=t.offsetTop-o+"px",t.style.left=t.offsetLeft-n+"px",t.style.right="auto",t.style.bottom="auto",E={top:t.style.top,left:t.style.left,right:"",bottom:""}}function s(){document.onmouseup=null,document.onmousemove=null,T()}e.onmousedown=a}(a,t);const n=a.querySelector(`#${i.MINIMIZE_BTN_ID}`);n&&n.addEventListener("click",(()=>{const t=null==a?void 0:a.querySelector(`#${i.CONTENT_ID}`);"none"===t.style.display?(t.style.display="block",n.textContent="‚àí"):(t.style.display="none",n.textContent="+")}));const o=a.querySelector(`#${i.HIDE_BTN_ID}`);o&&o.addEventListener("click",(()=>{d(),T()}));!function(){l&&document.body.contains(l)&&document.body.removeChild(l);l=document.createElement("div"),l.id=i.SHOW_BTN_ID,l.style.cssText="\n    position: fixed;\n    bottom: 20px;\n    right: 20px;\n    width: 36px;\n    height: 36px;\n    background: #ffffff;\n    border-radius: 18px;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n    display: none;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    z-index: 9999;\n    font-size: 18px;\n    color: #333;\n  ",l.innerHTML='<span style="font-weight: bold;">üóìÔ∏è</span>',l.title=i.PANEL_TITLE,l.addEventListener("click",(()=>{u(),T()})),document.body.appendChild(l)}()}();const t=document.querySelectorAll(i.SELECTOR_MENTIONS);s.clear(),t.forEach((t=>{const n=(t.textContent||"").trim();if(!n||(0,r.isPersianDate)(n))return;const a=function(t){try{const e=t.replace(/\s+/g," ").trim(),n=(0,r.parseGregorian)(e);return n?{date:n,display:e}:null}catch(t){return console.error("Error extracting date from mention:",t),null}}(n);if(a){const{date:n,display:r}=a,l=o.toJalaali(n),c=`${i.PERSIAN_MONTHS[l.jm-1]} ${l.jd}ÿå ${l.jy}`;s.set(r,{persianDate:c,element:t}),e++,console.log(`${i.LOG_PREFIX} Converted mention`,r,"to",c)}})),function(){if(!a)return;const t=a.querySelector(`#${i.CONTENT_ID}`);if(!t)return;if(0===s.size)return void(t.innerHTML=`\n      <div style="text-align: center; color: #888; padding: 8px 0;">\n        ${i.NO_DATES_MESSAGE}\n      </div>\n    `);let e="";s.forEach((({persianDate:t,element:n},o)=>{e+=`\n      <div style="margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid #f0f0f0;">\n        <div style="margin-bottom: 4px; direction: rtl; text-align: right;">\n          <span style="font-weight: 600; cursor: pointer;" data-date="${o}">${t}</span>\n        </div>\n        <div style="font-size: 12px; color: #888;">\n          ${o}\n        </div>\n      </div>\n    `})),e+=`\n    <div style="font-size: 12px; color: #888; margin-top: 8px; text-align: center;">\n      ${i.CLICK_INSTRUCTION}\n    </div>\n  `,t.innerHTML=e;t.querySelectorAll("span[data-date]").forEach((t=>{t.addEventListener("click",(t=>{const e=t.target.getAttribute("data-date");if(!e)return;const n=s.get(e);if(!n)return;n.element.scrollIntoView({behavior:"smooth",block:"center"});const o=n.element;o.style.backgroundColor="#fff3cd",setTimeout((()=>{o.style.backgroundColor=""}),2e3)}))}))}(),c?d():u()}else S(),s.clear();return e}catch(t){return console.error("Error handling date mentions:",t),e}},e.clearDateMentionConversions=function(){console.log(`${i.LOG_PREFIX} Clearing date mention conversions`);const t=s.size;return s.clear(),S(),t};const o=n(635),r=n(629),i=n(554);let a=null,l=null;const s=new Map;let c=!1,E={top:"",left:"",right:"20px",bottom:"20px"};function d(){a&&l&&(a.style.top&&(E.top=a.style.top),a.style.left&&(E.left=a.style.left),a.style.right&&(E.right=a.style.right),a.style.bottom&&(E.bottom=a.style.bottom),a.style.display="none",l.style.display="flex",c=!0)}function u(){a&&l&&(a.style.display="flex",l.style.display="none",c=!1)}function T(){try{const t={hidden:c,position:E};localStorage.setItem(i.PANEL_STATE_KEY,JSON.stringify(t))}catch(t){console.error("Error saving panel state:",t)}}function S(){a&&document.body.contains(a)&&(document.body.removeChild(a),a=null),l&&document.body.contains(l)&&(document.body.removeChild(l),l=null)}},70:function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function l(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}s((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.convertTableDates=function(t){return o(this,void 0,void 0,(function*(){const e=Date.now();console.log(`${i.LOG_PREFIX} Starting table date conversion, persianInput =`,t),s=!0;let n=0;try{const o=document.querySelectorAll(i.SELECTOR_TABLE_DATES);for(const e of o){if(!u(e))continue;const o=e.innerText.trim();if(!o)continue;const[a,l]=o.split("‚Üí").map((t=>t.trim()));if(t){if((0,r.isPersianDate)(a))continue;const t=(0,r.parseGregorian)(a),s=l?(0,r.parseGregorian)(l):null;if(t){const c=/[a-zA-Z]/.test(a)?E(t):(0,r.formatJalali)(t),u=s?/[a-zA-Z]/.test(l)?E(s):(0,r.formatJalali)(s):null;if("Invalid Date"===c||s&&"Invalid Date"===u)continue;const T=u?`${c} ‚Üí ${u}`:c,S=yield d(T);e.innerText!==S&&(e.hasAttribute(i.DATASET_KEYS.ORIGINAL_DATE)||e.setAttribute(i.DATASET_KEYS.ORIGINAL_DATE,o),e.innerText=S,n++,console.log(`${i.LOG_PREFIX} Converted`,o,"to",S))}}else if((0,r.isPersianDate)(a)||e.hasAttribute(i.DATASET_KEYS.ORIGINAL_DATE)){const t=e.getAttribute(i.DATASET_KEYS.ORIGINAL_DATE);if(t)e.innerText=t,e.removeAttribute(i.DATASET_KEYS.ORIGINAL_DATE),n++,console.log(`${i.LOG_PREFIX} Restored original date:`,t);else{const t=(0,r.persianToGregorian)(a),s=l?(0,r.persianToGregorian)(l):null;if(t){const r=s?`${t} ‚Üê ${s}`:t,a=yield d(r);e.innerText=a,n++,console.log(`${i.LOG_PREFIX} Converted Persian to Gregorian:`,o,"->",a)}}}}c=e,console.log(`${i.LOG_PREFIX} Processed ${n} dates`)}catch(t){console.error("Error during conversion:",t),l++}finally{s=!1}return n}))},e.resetAllConversions=function(){return o(this,void 0,void 0,(function*(){console.log(`${i.LOG_PREFIX} Resetting all conversions`),s=!0;let t=0;try{l=0,document.querySelectorAll(`[${i.DATASET_KEYS.ORIGINAL_DATE}]`).forEach((e=>{const n=e.getAttribute(i.DATASET_KEYS.ORIGINAL_DATE);n&&(e.innerText=n,e.removeAttribute(i.DATASET_KEYS.ORIGINAL_DATE),t++,console.log(`${i.LOG_PREFIX} Reset to original date:`,n))}));const e=document.querySelectorAll(i.SELECTOR_TABLE_DATES);for(const n of e){if(!u(n))continue;const e=n.innerText.trim();if(!e||!(0,r.isPersianDate)(e)||n.hasAttribute(i.DATASET_KEYS.ORIGINAL_DATE))continue;const[o,a]=e.split("‚Üí").map((t=>t.trim())),l=(0,r.persianToGregorian)(o),s=a?(0,r.persianToGregorian)(a):null;if(l){const o=s?`${l} ‚Üí ${s}`:l,r=yield d(o);n.innerText=r,t++,console.log(`${i.LOG_PREFIX} Converted Persian to Gregorian:`,e,"->",r)}}console.log(`${i.LOG_PREFIX} Reset ${t} date cells`)}finally{s=!1}return t}))},e.wasDateConversionRecent=function(t=i.TIME_THRESHOLD_MS){return Date.now()-c<t},e.isDateConversionInProgress=function(){return s},e.getErrorCount=function(){return l};const r=n(629),i=n(554),a=n(635);let l=0,s=!1,c=0;function E(t){const e=a.toJalaali(t);return`${i.PERSIAN_MONTHS[e.jm-1]} ${e.jd}ÿå ${e.jy}`}function d(t){return o(this,void 0,void 0,(function*(){return new Promise((e=>{chrome.storage.sync.get([i.STORAGE_KEYS.PERSIAN_NUMBERS],(n=>{e(n[i.STORAGE_KEYS.PERSIAN_NUMBERS]?t.replace(/\d/g,(t=>"€∞€±€≤€≥€¥€µ€∂€∑€∏€π"[parseInt(t)])):t)}))}))}))}function u(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}},280:function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.convertTimeline=c;const r=o(n(635)),i=n(554),a={January:1,February:2,March:3,April:4,May:5,June:6,July:7,August:8,September:9,October:10,November:11,December:12};function l(t){return t.replace(/\d/g,(t=>"€∞€±€≤€≥€¥€µ€∂€∑€∏€π"[parseInt(t)]))}let s=i.DEFAULT_FONT;function c(){chrome.storage.sync.get([i.STORAGE_KEYS.SELECTED_FONT],(t=>{s=t[i.STORAGE_KEYS.SELECTED_FONT]||i.DEFAULT_FONT,function(){var t;const e=document.querySelector('.notion-timeline-view div[style*="padding-top"] span');if(!e)return;const n=null===(t=e.textContent)||void 0===t?void 0:t.trim();if(!n)return;const o=n.split(" ");if(o.length<2)return;const c=o[0],E=parseInt(o[1],10),d=a[c];if(!d||isNaN(E))return;const u=new Date(E,d-1,1),T=r.default.toJalaali(u),S=`${i.PERSIAN_MONTHS[T.jm-1]} ${l(T.jy.toString())}`;e.textContent=S,e.style.fontFamily=`${s}, ${i.SYSTEM_FONTS}`,e.setAttribute("dir","rtl"),window.__timelineBaseDate=u}(),function(){const t=window.__timelineBaseDate;if(!t)return;const e=document.querySelector(".notion-timeline-view .notion-shimmer-timeline-transition");if(!e)return;Array.from(e.querySelectorAll('div[style*="width: 40px"]')).forEach(((e,n)=>{const o=new Date(t);o.setDate(t.getDate()+n);const a=l(r.default.toJalaali(o).jd.toString()),c=e.querySelector("span");c?(c.textContent=a,c.style.fontFamily=`${s}, ${i.SYSTEM_FONTS}`,c.setAttribute("dir","rtl")):(e.textContent=a,e.style.fontFamily=`${s}, ${i.SYSTEM_FONTS}`,e.setAttribute("dir","rtl"))})),e.querySelectorAll('div[style*="background: rgb(211, 79, 67)"]').forEach((t=>t.remove()))}(),function(){const t=document.querySelector('.notion-timeline-view > div[style*="background: white"][style*="box-shadow: inset"]');if(!t)return;const e=window.__timelineBaseDate;if(!e)return;t.querySelectorAll("div").forEach((t=>{var n;const o=null===(n=t.textContent)||void 0===n?void 0:n.trim();if(!o||void 0===a[o])return;const l=parseFloat(t.style.left||"0"),c=Math.round(l/40),E=new Date(e);E.setDate(e.getDate()+c);const d=r.default.toJalaali(E),u=i.PERSIAN_MONTHS[d.jm-1];t.textContent=u,t.style.fontFamily=`${s}, ${i.SYSTEM_FONTS}`,t.setAttribute("dir","rtl")}))}()}))}chrome.storage.onChanged.addListener(((t,e)=>{"sync"===e&&t[i.STORAGE_KEYS.SELECTED_FONT]&&chrome.storage.sync.get([i.STORAGE_KEYS.SELECTED_FONT],(t=>{s=t[i.STORAGE_KEYS.SELECTED_FONT]||i.DEFAULT_FONT,c()}))})),setTimeout((function(){chrome.storage.sync.get([i.STORAGE_KEYS.SELECTED_FONT],(t=>{s=t[i.STORAGE_KEYS.SELECTED_FONT]||i.DEFAULT_FONT,document.querySelector(".notion-timeline-view")&&(c(),function(){const t=document.querySelector(".notion-timeline-view");if(!t)return;new MutationObserver((()=>c())).observe(t,{childList:!0,subtree:!0,characterData:!0})}())}))}),1500)},283:function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function l(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}s((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const r=n(70),i=n(45),a=n(670),l=n(554);n(725),n(706),n(280);let s=!1,c=!1,E=!1,d=null;function u(){return o(this,void 0,void 0,(function*(){if(E)console.log(`${l.LOG_PREFIX} Already processing, skipping`);else{E=!0;try{console.log(`${l.LOG_PREFIX} Processing dates, mode:`,s?"Persian":"Gregorian");const t=yield(0,r.convertTableDates)(s),e=(0,i.handleDateMentions)(s),n=t+e,o=(0,r.getErrorCount)();o>0&&chrome.runtime.sendMessage({[l.MESSAGE_TYPES.ERROR_COUNT_CHANGED]:!0,errorCount:o}),console.log(`${l.LOG_PREFIX} Processed ${n} dates (${t} table dates, ${e} mentions)`)}finally{E=!1}}}))}chrome.storage.sync.get([l.STORAGE_KEYS.PERSIAN_INPUT,l.STORAGE_KEYS.FONT_INJECTION_ENABLED],(t=>{console.log(`${l.LOG_PREFIX} Initial state loaded`,t),s=!!t[l.STORAGE_KEYS.PERSIAN_INPUT],c=!!t[l.STORAGE_KEYS.FONT_INJECTION_ENABLED],s&&setTimeout((()=>u()),500),(0,a.injectFonts)(c)})),chrome.runtime.onMessage.addListener(((t,e,n)=>o(void 0,void 0,void 0,(function*(){if(t.type===l.MESSAGE_TYPES.APPLY_SETTINGS&&t.data)return s=!!t.data[l.STORAGE_KEYS.PERSIAN_INPUT],c=!!t.data[l.STORAGE_KEYS.FONT_INJECTION_ENABLED],t.data[l.STORAGE_KEYS.SELECTED_FONT]&&(0,a.setCurrentFont)(t.data[l.STORAGE_KEYS.SELECTED_FONT]),(0,a.injectFonts)(c),void(s&&(yield u()));if(console.log(`${l.LOG_PREFIX} Received message`,t),void 0!==t.persianInput&&(s=t.persianInput,console.log(`${l.LOG_PREFIX} Persian input set to`,s),yield u()),void 0!==t.fontInjectionEnabled&&(c=t.fontInjectionEnabled,console.log(`${l.LOG_PREFIX} Font injection set to`,c),(0,a.injectFonts)(c)),t.selectedFont&&(console.log(`${l.LOG_PREFIX} Font selection changed to`,t.selectedFont),(0,a.setCurrentFont)(t.selectedFont)),t[l.MESSAGE_TYPES.CHECK_ERRORS]){const t=(0,r.getErrorCount)();return console.log(`${l.LOG_PREFIX} Returning error count`,t),n({errorCount:t}),!0}if(t[l.MESSAGE_TYPES.REFRESH_CONVERSION]){console.log(`${l.LOG_PREFIX} Reset requested`);const e=(yield(0,r.resetAllConversions)())+(0,i.clearDateMentionConversions)();return t.forceReload?(chrome.runtime.sendMessage({[l.MESSAGE_TYPES.RESET_COMPLETE]:!0,count:e,reloading:!0}),window.location.reload(),!0):(setTimeout((()=>o(void 0,void 0,void 0,(function*(){s&&(yield u()),chrome.runtime.sendMessage({[l.MESSAGE_TYPES.RESET_COMPLETE]:!0,count:e})}))),500),!0)}return!1})))),document.addEventListener("click",(t=>{var e,n,o,r;if(!s)return;const i=t.target;(i.matches(l.SELECTOR_DATE_BUTTONS)||i.closest(l.SELECTOR_PREV_MONTH)||i.closest(l.SELECTOR_NEXT_MONTH)||i.closest(l.SELECTOR_DATE_FORMAT_CLEAR)&&((null===(e=i.textContent)||void 0===e?void 0:e.includes("Date format"))||(null===(n=i.textContent)||void 0===n?void 0:n.includes("Clear"))))&&(console.log(`${l.LOG_PREFIX} Date picker interaction detected`),setTimeout((()=>u()),l.DEBOUNCE_DELAY)),i.closest(l.SELECTOR_DATE_MENTION)&&((null===(o=i.textContent)||void 0===o?void 0:o.includes("@Date"))||(null===(r=i.textContent)||void 0===r?void 0:r.includes("@Reminder")))&&(console.log(`${l.LOG_PREFIX} Date mention interaction detected`),setTimeout((()=>u()),800))})),document.addEventListener("input",(t=>{if(!s)return;const e=t.target;(e.closest(l.SELECTOR_PROPERTY_VALUE)||"INPUT"===e.tagName&&e.closest(l.SELECTOR_DATE_PICKER_INPUT))&&(console.log(`${l.LOG_PREFIX} Date field input detected`),d&&clearTimeout(d),d=window.setTimeout((()=>u()),l.DEBOUNCE_DELAY))})),new MutationObserver((t=>{!s||(0,r.isDateConversionInProgress)()||(0,r.wasDateConversionRecent)(l.TIME_THRESHOLD_MS)||t.some((t=>!("characterData"!==t.type||t.target.nodeType!==Node.TEXT_NODE||!t.target.textContent)||!!("childList"===t.type&&t.target instanceof HTMLElement&&(t.target.closest(l.SELECTOR_PROPERTY_VALUE)||t.target.closest(".notion-date")||t.target.closest(".notion-reminder")||t.target.closest(l.SELECTOR_DATE_PICKER_INPUT)))))&&(console.log(`${l.LOG_PREFIX} Date changes detected by observer`),d&&clearTimeout(d),d=window.setTimeout((()=>u()),l.DEBOUNCE_DELAY))})).observe(document.body,{childList:!0,subtree:!0,characterData:!0}),setInterval((()=>{if(!s)return;const t=(0,r.getErrorCount)();t>0&&chrome.runtime.sendMessage({[l.MESSAGE_TYPES.ERROR_COUNT_CHANGED]:!0,errorCount:t},(()=>{}))}),5e3)},554:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HTML_CONSTANTS=e.SELECTOR_DATE_PICKER_INPUT=e.SELECTOR_PROPERTY_VALUE=e.SELECTOR_DATE_MENTION=e.SELECTOR_DATE_FORMAT_CLEAR=e.SELECTOR_NEXT_MONTH=e.SELECTOR_PREV_MONTH=e.SELECTOR_DATE_BUTTONS=e.NOTION_URL_PATTERN=e.DEBOUNCE_DELAY=e.MESSAGE_TYPES=e.UI_ELEMENTS=e.STORAGE_KEYS=e.SELECTOR_REMINDERS=e.DATASET_KEYS=e.SYSTEM_FONTS=e.DEFAULT_FONT=e.SELECTOR_GLOBAL_FONTS=e.SELECTOR_RTL_ELEMENTS=e.SELECTOR_TODO_BLOCK=e.SELECTOR_TABLE_BLOCK=e.SELECTOR_BULLETED_LIST=e.SELECTOR_TOGGLE_BLOCK=e.SELECTOR_QUOTE_BLOCK=e.SELECTOR_NUMBERED_LIST=e.SELECTOR_CODE_BLOCK=e.SELECTOR_EDITABLE_TEXT=e.ALL_FONTS_CSS=e.DEFAULT_FONTS=e.UNICODE_RANGE=e.PANEL_STATE_KEY=e.SELECTOR_MENTIONS=e.CLICK_INSTRUCTION=e.NO_DATES_MESSAGE=e.PANEL_TITLE=e.TOAST_ID=e.SHOW_BTN_ID=e.HIDE_BTN_ID=e.MINIMIZE_BTN_ID=e.CONTENT_ID=e.PANEL_ID=e.SELECTOR_TABLE_DATES=e.TIME_THRESHOLD_MS=e.STANDARD_DATE_FORMAT=e.PERSIAN_MONTHS=e.MONTHS=e.LOG_PREFIX=void 0,e.LOG_PREFIX="mtlog:",e.MONTHS={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12,jan:1,feb:2,mar:3,apr:4,jun:6,jul:7,aug:8,sep:9,sept:9,oct:10,nov:11,dec:12},e.PERSIAN_MONTHS=["ŸÅÿ±Ÿàÿ±ÿØ€åŸÜ","ÿßÿ±ÿØ€åÿ®Ÿáÿ¥ÿ™","ÿÆÿ±ÿØÿßÿØ","ÿ™€åÿ±","ŸÖÿ±ÿØÿßÿØ","ÿ¥Ÿáÿ±€åŸàÿ±","ŸÖŸáÿ±","ÿ¢ÿ®ÿßŸÜ","ÿ¢ÿ∞ÿ±","ÿØ€å","ÿ®ŸáŸÖŸÜ","ÿßÿ≥ŸÅŸÜÿØ"],e.STANDARD_DATE_FORMAT=/^(\d{4})\/(\d{1,2})\/(\d{1,2})$/,e.TIME_THRESHOLD_MS=500,e.SELECTOR_TABLE_DATES="[data-testid='property-value'] div, div.notion-date",e.PANEL_ID="persian-dates-panel",e.CONTENT_ID="persian-dates-content",e.MINIMIZE_BTN_ID="persian-dates-minimize",e.HIDE_BTN_ID="persian-dates-hide",e.SHOW_BTN_ID="persian-dates-show-button",e.TOAST_ID="persian-dates-toast",e.PANEL_TITLE="Persian Dates",e.NO_DATES_MESSAGE="No date mentions found.",e.CLICK_INSTRUCTION="Click a date to copy Persian format or scroll to its location",e.SELECTOR_MENTIONS=".notion-text-mention-token .notion-reminder",e.PANEL_STATE_KEY="persian-dates-panel-state",e.UNICODE_RANGE="U+0600-06FF, U+0750-077F, U+FB50-FDFF, U+FE70-FEFF",e.DEFAULT_FONTS=[{en_name:"Vazirmatn",fa_name:"Ÿàÿ≤€åÿ± ŸÖÿ™ŸÜ",creator:"ÿµÿßÿ®ÿ± ÿ±ÿßÿ≥ÿ™€å ⁄©ÿ±ÿØÿßÿ±"},{en_name:"Sahel",fa_name:"ÿ≥ÿßÿ≠ŸÑ",creator:"ÿµÿßÿ®ÿ± ÿ±ÿßÿ≥ÿ™€å ⁄©ÿ±ÿØÿßÿ±"},{en_name:"Parastoo",fa_name:"Ÿæÿ±ÿ≥ÿ™Ÿà",creator:"ÿµÿßÿ®ÿ± ÿ±ÿßÿ≥ÿ™€å ⁄©ÿ±ÿØÿßÿ±"}],e.ALL_FONTS_CSS=`\n/* ========== Vazirmatn ========== */\n@font-face {\n  font-family: "Vazirmatn";\n  src:\n    url("${chrome.runtime.getURL("assets/fonts/vazir/Vazirmatn[wght].woff2")}")\n      format("woff2 supports variations"),\n    url("${chrome.runtime.getURL("assets/fonts/vazir/Vazirmatn[wght].woff2")}")\n      format("woff2-variations");\n  font-weight: 100 900;\n  font-style: normal;\n  font-display: swap;\n  unicode-range: ${e.UNICODE_RANGE};\n}\n\n/* ========== Sahel ========== */\n@font-face {\n  font-family: "Sahel";\n  src:\n    url("${chrome.runtime.getURL("assets/fonts/sahel/Sahel-VF.woff2")}")\n      format("woff2 supports variations"),\n    url("${chrome.runtime.getURL("assets/fonts/sahel/Sahel-VF.woff2")}")\n      format("woff2-variations");\n  font-weight: 100 900;\n  font-style: normal;\n  font-display: swap;\n  unicode-range: ${e.UNICODE_RANGE};\n}\n\n/* ========== Parastoo ========== */\n@font-face {\n  font-family: "Parastoo";\n  src: url("${chrome.runtime.getURL("assets/fonts/parastoo/Parastoo.woff2")}") format("woff2");\n  font-weight: normal;\n  font-style: normal;\n  unicode-range: ${e.UNICODE_RANGE};\n}\n@font-face {\n  font-family: "Parastoo";\n  src: url("${chrome.runtime.getURL("assets/fonts/parastoo/Parastoo-Bold.woff2")}")\n    format("woff2");\n  font-weight: bold;\n  font-style: normal;\n  unicode-range: ${e.UNICODE_RANGE};\n}\n\n/* Keep code blocks in LTR */\n.notion-text-content[data-content-type="code"] {\n  direction: ltr !important;\n  text-align: left !important;\n  font-family: "SF Mono", "Consolas", "Monaco", "Andale Mono", monospace !important;\n}\n`,e.SELECTOR_EDITABLE_TEXT='.notranslate[data-content-editable-leaf="true"]',e.SELECTOR_CODE_BLOCK='[data-content-type="code"]',e.SELECTOR_NUMBERED_LIST=".notion-selectable.notion-numbered_list-block",e.SELECTOR_QUOTE_BLOCK=".notion-quote-block",e.SELECTOR_TOGGLE_BLOCK=".notion-selectable.notion-toggle-block",e.SELECTOR_BULLETED_LIST=".notion-selectable.notion-bulleted_list-block",e.SELECTOR_TABLE_BLOCK=".notion-table-block",e.SELECTOR_TODO_BLOCK=".notion-to_do-block",e.SELECTOR_RTL_ELEMENTS='.notion-body h1, .notion-body h2, .notion-body h3, .notion-body h4, .notion-body h5, .notion-body h6, .notion-table-view th, .notion-table-view td, .notion-collection_view-block div[data-content-editable-void="true"] > div:nth-child(2), .notion-table-view-header-cell, .notion-table-view-cell',e.SELECTOR_GLOBAL_FONTS=[".notion-page-content",".notion-table-view",".notion-board-view",".notion-gallery-view",".notion-page-block",".notion-topbar",".notion-body",".notion-selectable",".notion-collection_view-block",".notion-frame",".notion-collection-item"].join(", "),e.DEFAULT_FONT="Vazirmatn",e.SYSTEM_FONTS='-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, sans-serif',e.DATASET_KEYS={ORIGINAL_DATE:"originalDate",CONVERTED:"converted"},e.SELECTOR_REMINDERS=".notion-reminder",e.STORAGE_KEYS={PERSIAN_INPUT:"persianInput",FONT_INJECTION_ENABLED:"fontInjectionEnabled",SELECTED_FONT:"selectedFont",PERSIAN_NUMBERS:"persianNumbers"},e.UI_ELEMENTS={PERSIAN_TOGGLE:"persian-toggle",FONT_TOGGLE:"font-toggle",RESET_BUTTON:"reset-button",ERROR_MESSAGE:"error-message",FONT_SELECTOR_CONTAINER:"font-selector-container",FONT_SELECTOR:"font-selector",FONT_AUTHOR:"font-author",STATUS:"status",CALL_MESSAGE:"call-message"},e.MESSAGE_TYPES={APPLY_SETTINGS:"applySettings",RESET_COMPLETE:"resetComplete",ERROR_COUNT_CHANGED:"errorCountChanged",CHECK_ERRORS:"checkErrors",REFRESH_CONVERSION:"refreshConversion"},e.DEBOUNCE_DELAY=300,e.NOTION_URL_PATTERN="*://*.notion.so/*",e.SELECTOR_DATE_BUTTONS='button[name="day"]',e.SELECTOR_PREV_MONTH='button[name="previous-month"]',e.SELECTOR_NEXT_MONTH='button[name="next-month"]',e.SELECTOR_DATE_FORMAT_CLEAR='[role="button"]',e.SELECTOR_DATE_MENTION=".notion-selectable",e.SELECTOR_PROPERTY_VALUE='[data-testid="property-value"]',e.SELECTOR_DATE_PICKER_INPUT=".rdp",e.HTML_CONSTANTS={TITLE:"ŸÜŸàÿ¥ŸÜ ŸÅÿßÿ±ÿ≥€å",HEADER_TEXT:"ŸÜŸàÿ¥ŸÜ ŸÅÿßÿ±ÿ≥€å",CALENDAR_LABEL:"ÿ™ÿßÿ±€åÿÆ ÿ¥ŸÖÿ≥€å",FONT_LABEL:"ŸÅŸàŸÜÿ™ ŸÅÿßÿ±ÿ≥€å",CALL_MESSAGE:"ÿß⁄ØŸá ⁄Ü€åÿ≤€å ÿÆÿ±ÿßÿ® ÿ®ŸàÿØÿå €åŸá ÿÆÿ®ÿ± ÿ®ŸáŸÖ ÿ®ÿØŸá  üêû",FOOTER_NAME:"Matthew Truth"}},629:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isPersianDate=i,e.parseGregorian=function(t){if(!t||"string"!=typeof t||i(t))return null;t=t.trim();try{let e=t.match(/\b([A-Za-z]+)\s+(\d{1,2}),\s*(\d{4})\b/);if(e){const t=o.MONTHS[e[1].toLowerCase()];return t?new Date(+e[3],t-1,+e[2]):null}if(e=t.match(/\b(\d{4})[-/](\d{1,2})[-/](\d{1,2})\b/),e){const n=parseInt(e[1],10),r=parseInt(e[2],10),i=parseInt(e[3],10);return n>=1300&&n<1500&&!Object.keys(o.MONTHS).some((e=>t.toLowerCase().includes(e.toLowerCase())))||(r<1||r>12||i<1||i>31)?null:new Date(n,r-1,i)}if(e=t.match(/\b(\d{1,2})\/(\d{1,2})\/(\d{4})\b/),e){const t=parseInt(e[1],10),n=parseInt(e[2],10),o=parseInt(e[3],10);return o>=1300&&o<1500||(t<1||t>12||n<1||n>31)?null:new Date(o,t-1,n)}if(e=t.match(/\b(\d{4})\s+([A-Za-z]+)\s+(\d{1,2})\b/),e){const t=o.MONTHS[e[2].toLowerCase()];return t?new Date(+e[1],t-1,+e[3]):null}if(/today/i.test(t))return new Date;if(/yesterday/i.test(t)){const t=new Date;return t.setDate(t.getDate()-1),t}if(/tomorrow/i.test(t)){const t=new Date;return t.setDate(t.getDate()+1),t}}catch(e){console.error("Error parsing date:",t,e)}return null},e.formatJalali=function(t){if(!t||!(t instanceof Date)||isNaN(t.getTime()))return console.error("Invalid date passed to formatJalali",t),"Invalid Date";try{const e=r.toJalaali(t);return`${e.jy}/${e.jm.toString().padStart(2,"0")}/${e.jd.toString().padStart(2,"0")}`}catch(t){return console.error("Error in formatJalali:",t),"Invalid Date"}},e.persianToGregorian=function(t){try{const e=t.match(o.STANDARD_DATE_FORMAT);if(!e)return null;const n=parseInt(e[1],10),i=parseInt(e[2],10),a=parseInt(e[3],10);if(!r.isValidJalaaliDate(n,i,a))return null;const l=r.toGregorian(n,i,a);return`${l.gy}/${l.gm.toString().padStart(2,"0")}/${l.gd.toString().padStart(2,"0")}`}catch(t){return console.error("Error converting Persian to Gregorian:",t),null}};const o=n(554),r=n(635);function i(t){if(!t||"string"!=typeof t)return!1;const e=(t=t.trim()).match(o.STANDARD_DATE_FORMAT);if(e){const t=parseInt(e[1],10),n=parseInt(e[2],10),o=parseInt(e[3],10);if(t>=1300&&t<1500&&n>=1&&n<=12&&o>=1&&o<=31)return r.isValidJalaaliDate(t,n,o)}return o.PERSIAN_MONTHS.some((e=>t.includes(e)))}},635:t=>{t.exports={toJalaali:function(t,e,n){"[object Date]"===Object.prototype.toString.call(t)&&(n=t.getDate(),e=t.getMonth()+1,t=t.getFullYear());return l(s(t,e,n))},toGregorian:n,isValidJalaaliDate:function(t,e,n){return t>=-61&&t<=3177&&e>=1&&e<=12&&n>=1&&n<=r(t,e)},isLeapJalaaliYear:o,jalaaliMonthLength:r,jalCal:i,j2d:a,d2j:l,g2d:s,d2g:c,jalaaliToDateObject:E,jalaaliWeek:function(t,e,n){var o=E(t,e,n).getDay(),r=6==o?0:-(o+1),i=6+r;return{saturday:l(a(t,e,n+r)),friday:l(a(t,e,n+i))}}};var e=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function n(t,e,n){return c(a(t,e,n))}function o(t){return 0===function(t){var n,o,r,i,a,l=e.length,s=e[0];if(t<s||t>=e[l-1])throw new Error("Invalid Jalaali year "+t);for(a=1;a<l&&(o=(n=e[a])-s,!(t<n));a+=1)s=n;i=t-s,o-i<6&&(i=i-o+33*d(o+4,33));-1===(r=u(u(i+1,33)-1,4))&&(r=4);return r}(t)}function r(t,e){return e<=6?31:e<=11||o(t)?30:29}function i(t,n){var o,r,i,a,l,s,c=e.length,E=t+621,T=-14,S=e[0];if(t<S||t>=e[c-1])throw new Error("Invalid Jalaali year "+t);for(s=1;s<c&&(r=(o=e[s])-S,!(t<o));s+=1)T=T+8*d(r,33)+d(u(r,33),4),S=o;return T=T+8*d(l=t-S,33)+d(u(l,33)+3,4),4===u(r,33)&&r-l==4&&(T+=1),a=20+T-(d(E,4)-d(3*(d(E,100)+1),4)-150),n?{gy:E,march:a}:(r-l<6&&(l=l-r+33*d(r+4,33)),-1===(i=u(u(l+1,33)-1,4))&&(i=4),{leap:i,gy:E,march:a})}function a(t,e,n){var o=i(t,!0);return s(o.gy,3,o.march)+31*(e-1)-d(e,7)*(e-7)+n-1}function l(t){var e,n=c(t).gy,o=n-621,r=i(o,!1);if((e=t-s(n,3,r.march))>=0){if(e<=185)return{jy:o,jm:1+d(e,31),jd:u(e,31)+1};e-=186}else o-=1,e+=179,1===r.leap&&(e+=1);return{jy:o,jm:7+d(e,30),jd:u(e,30)+1}}function s(t,e,n){var o=d(1461*(t+d(e-8,6)+100100),4)+d(153*u(e+9,12)+2,5)+n-34840408;return o=o-d(3*d(t+100100+d(e-8,6),100),4)+752}function c(t){var e,n,o,r;return e=(e=4*t+139361631)+4*d(3*d(4*t+183187720,146097),4)-3908,n=5*d(u(e,1461),4)+308,o=d(u(n,153),5)+1,r=u(d(n,153),12)+1,{gy:d(e,1461)-100100+d(8-r,6),gm:r,gd:o}}function E(t,e,o,r,i,a,l){var s=n(t,e,o);return new Date(s.gy,s.gm-1,s.gd,r||0,i||0,a||0,l||0)}function d(t,e){return~~(t/e)}function u(t,e){return t-~~(t/e)*e}},670:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.saveSelectedFont=function(t){return new Promise((e=>{chrome.storage.sync.set({[o.STORAGE_KEYS.SELECTED_FONT]:t},(()=>e()))}))},e.loadSelectedFont=O,e.setCurrentFont=function(t){a=t,r&&document.querySelectorAll(o.SELECTOR_EDITABLE_TEXT).forEach((t=>{const e=t;l(e.textContent||"")&&(e.style.fontFamily=`${a}, ${o.SYSTEM_FONTS}`)}));f(),_(),d(),u(),T()},e.injectFonts=function(t){t?O().then((t=>{a=t,r||(r=document.createElement("style"),r.textContent=o.ALL_FONTS_CSS,document.head.appendChild(r)),function(){if(i)return;i=new MutationObserver((t=>{for(const e of t)"childList"===e.type?e.addedNodes.forEach((t=>{t.nodeType===Node.ELEMENT_NODE&&c(t)})):"characterData"===e.type&&s(e.target);S(),f(),_(),d(),u(),T()})),i.observe(document.body,{childList:!0,subtree:!0,characterData:!0}),c(document.body),S(),f(),_(),d(),u(),T()}()})):(r&&(r.remove(),r=null),document.querySelectorAll(o.SELECTOR_EDITABLE_TEXT).forEach((t=>{const e=t;e.style.fontFamily="",e.style.direction="",e.style.textAlign=""})),document.querySelectorAll(o.SELECTOR_GLOBAL_FONTS).forEach((t=>{t.style.removeProperty("font-family")})),document.querySelectorAll(o.SELECTOR_RTL_ELEMENTS).forEach((t=>{const e=t;e.style.direction="",e.style.textAlign="",e.style.fontFamily=""})),document.querySelectorAll(o.SELECTOR_NUMBERED_LIST).forEach((t=>{t.style.direction="",t.style.textAlign="";const e=t.querySelector(".pseudoBefore");e&&(e.style.direction="",e.style.textAlign="")})),document.querySelectorAll(o.SELECTOR_QUOTE_BLOCK).forEach((t=>{const e=t.querySelector("blockquote");if(e){const t=e.querySelector("div[style*='border-right']");t&&(t.style.borderRight="none",t.style.borderLeft="3px solid currentcolor",t.style.paddingLeft="",t.style.paddingRight=""),e.style.direction="",e.style.textAlign=""}})),document.querySelectorAll(o.SELECTOR_TOGGLE_BLOCK).forEach((t=>{const e=t;e.style.textAlign="";const n=e.firstElementChild;n&&n.style.removeProperty("flex-direction")})),document.querySelectorAll(`${o.SELECTOR_BULLETED_LIST}, ${o.SELECTOR_TABLE_BLOCK}, ${o.SELECTOR_TODO_BLOCK}`).forEach((t=>{t.removeAttribute("dir")})),i&&(i.disconnect(),i=null))};const o=n(554);let r=null,i=null,a=o.DEFAULT_FONT;function l(t){return/[\u0600-\u06FF\u0750-\u077F\uFB50-\uFDFF\uFE70-\uFEFF]/.test(t)}function s(t){var e;if(!l(t.textContent||""))return;const n=null===(e=t.parentElement)||void 0===e?void 0:e.closest(o.SELECTOR_EDITABLE_TEXT);n&&!n.closest(o.SELECTOR_CODE_BLOCK)&&(n.style.fontFamily=`${a}, ${o.SYSTEM_FONTS}`,n.style.direction="rtl",n.style.textAlign="right")}function c(t){const e=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null);let n;for(;n=e.nextNode();)s(n)}function E(t){const e=t.querySelector(".pseudoBefore");if(e){let t=e.style.getPropertyValue("--pseudoBefore--content")||e.textContent||"";t=t.replace(/["']/g,"").trim();const n=t.replace(/\d/g,(t=>"€∞€±€≤€≥€¥€µ€∂€∑€∏€π"[parseInt(t)]));e.style.removeProperty("--pseudoBefore--content"),e.textContent=n,e.style.direction="rtl",e.style.textAlign="right"}}function d(){document.querySelectorAll(o.SELECTOR_NUMBERED_LIST).forEach((t=>{l(t.textContent||"")&&(E(t),t.style.direction="rtl",t.style.textAlign="right")}))}function u(){document.querySelectorAll(o.SELECTOR_QUOTE_BLOCK).forEach((t=>{if(l(t.textContent||"")){const e=t.querySelector("blockquote");if(e){const t=e.querySelector("div[style*='border-left']");if(t){const e=window.getComputedStyle(t),n=e.paddingLeft,o=e.paddingRight;t.style.borderLeft="none",t.style.borderRight="3px solid currentcolor",t.style.paddingLeft=o,t.style.paddingRight=n}e.style.direction="rtl",e.style.textAlign="right"}}}))}function T(){document.querySelectorAll(o.SELECTOR_TOGGLE_BLOCK).forEach((t=>{if(l(t.textContent||"")){const e=t;e.style.textAlign="right";const n=e.firstElementChild;n&&n.style.setProperty("flex-direction","row-reverse","important")}}))}function S(){document.querySelectorAll(o.SELECTOR_BULLETED_LIST).forEach((t=>{t.setAttribute("dir","rtl")})),document.querySelectorAll(o.SELECTOR_TABLE_BLOCK).forEach((t=>{Array.from(t.querySelectorAll("*")).some((t=>l(t.textContent||"")))&&t.setAttribute("dir","rtl")})),document.querySelectorAll(o.SELECTOR_TODO_BLOCK).forEach((t=>{Array.from(t.querySelectorAll("*")).some((t=>l(t.textContent||"")))&&t.setAttribute("dir","rtl")}))}function _(){document.querySelectorAll(o.SELECTOR_RTL_ELEMENTS).forEach((t=>{if(l(t.textContent||"")){const e=t;e.style.direction="rtl",e.style.textAlign="right",e.style.fontFamily=`${a}, ${o.SYSTEM_FONTS}`}}))}function f(){document.querySelectorAll(o.SELECTOR_GLOBAL_FONTS).forEach((t=>{t.style.setProperty("font-family",`${a}, ${o.SYSTEM_FONTS}`,"important")}))}function O(){return new Promise((t=>{chrome.storage.sync.get([o.STORAGE_KEYS.SELECTED_FONT],(e=>t(e[o.STORAGE_KEYS.SELECTED_FONT]||o.DEFAULT_FONT)))}))}},706:function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.convertPageCalendar=u;const r=o(n(635)),i=n(554),a={January:1,February:2,March:3,April:4,May:5,June:6,July:7,August:8,September:9,October:10,November:11,December:12,Jan:1,Feb:2,Mar:3,Apr:4,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12},l={Sun:"€å⁄©ÿ¥ŸÜÿ®Ÿá",Mon:"ÿØŸàÿ¥ŸÜÿ®Ÿá",Tue:"ÿ≥Ÿá‚Äåÿ¥ŸÜÿ®Ÿá",Wed:"⁄ÜŸáÿßÿ±ÿ¥ŸÜÿ®Ÿá",Thu:"ŸæŸÜÿ¨‚Äåÿ¥ŸÜÿ®Ÿá",Fri:"ÿ¨ŸÖÿπŸá",Sat:"ÿ¥ŸÜÿ®Ÿá"};function s(t){return t.replace(/\d/g,(t=>"€∞€±€≤€≥€¥€µ€∂€∑€∏€π"[+t]))}let c=i.DEFAULT_FONT;function E(){return document.querySelector('.notion-calendar-view > div:first-child div[style*="font-weight: 600"]')}function d(){document.querySelectorAll(".notion-calendar-header-days > div").forEach((t=>{var e;const n=t,o=null===(e=n.textContent)||void 0===e?void 0:e.trim();o&&o in l&&(n.textContent=l[o],n.style.fontFamily=`${c}, ${i.SYSTEM_FONTS}`,n.style.direction="rtl")}))}function u(){!function(){const t=E();if(!t)return;t.getAttribute("data-original-header")||t.setAttribute("data-original-header",t.textContent||"");const e=(t.getAttribute("data-original-header")||"").split(/\s+/);if(e.length<2)return;const n=e[0],o=parseInt(e[1]),l=a[n];if(!l||isNaN(o))return;const d=new Date(o,l-1,1),u=r.default.toJalaali(d),T=i.PERSIAN_MONTHS[u.jm-1],S=s(u.jy.toString());t.textContent=`${T} ${S}`,t.setAttribute("dir","rtl"),t.style.fontFamily=`${c}, ${i.SYSTEM_FONTS}`}(),d(),function(){const t=document.querySelectorAll(".notion-calendar-view-day"),e=E();if(!e)return;const n=(e.getAttribute("data-original-header")||"").split(/\s+/);if(n.length<2)return;const o=n[0],l=parseInt(n[1]),d=a[o];if(!d||isNaN(l))return;let u=new Date(l,d-1,1);t.forEach((t=>{var e;let n=(null===(e=t.textContent)||void 0===e?void 0:e.trim())||"";const o=n.match(/^(Jan|Feb|Mar|Apr|Jun|Jul|Aug|Sep|Oct|Nov|Dec)/);if(o){const t=o[0],e=n.match(/\d+/);if(e){const n=parseInt(e[0]),o=a[t];let r=u.getFullYear();o<u.getMonth()+1&&r++,u=new Date(r,o-1,n)}}const l=r.default.toJalaali(u);t.textContent=s(l.jd.toString()),t.style.fontFamily=`${c}, ${i.SYSTEM_FONTS}`,t.style.direction="rtl",u.setDate(u.getDate()+1)}))}()}function T(t,e){const n=document.querySelector(t);if(!n)return;new MutationObserver(e).observe(n,{childList:!0,subtree:!0,characterData:!0})}chrome.storage.onChanged.addListener(((t,e)=>{"sync"===e&&(t[i.STORAGE_KEYS.PERSIAN_INPUT]||t[i.STORAGE_KEYS.SELECTED_FONT])&&chrome.storage.sync.get([i.STORAGE_KEYS.PERSIAN_INPUT,i.STORAGE_KEYS.SELECTED_FONT],(t=>{c=t[i.STORAGE_KEYS.SELECTED_FONT]||i.DEFAULT_FONT,t[i.STORAGE_KEYS.PERSIAN_INPUT]&&u()}))})),chrome.storage.sync.get([i.STORAGE_KEYS.PERSIAN_INPUT,i.STORAGE_KEYS.SELECTED_FONT],(t=>{if(c=t[i.STORAGE_KEYS.SELECTED_FONT]||i.DEFAULT_FONT,t[i.STORAGE_KEYS.PERSIAN_INPUT]){u(),T(".notion-calendar-view",u),T(".notion-calendar-header-days",d);let t=null;window.addEventListener("scroll",(()=>{t&&clearTimeout(t),t=window.setTimeout((()=>u()),300)}))}}))},725:function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.convertCalendar=u;const r=o(n(635)),i=n(554),a={January:1,February:2,March:3,April:4,May:5,June:6,July:7,August:8,September:9,October:10,November:11,December:12},l={Sat:"ÿ¥ŸÜÿ®Ÿá",Sun:"€å⁄©ÿ¥ŸÜÿ®Ÿá",Mon:"ÿØŸàÿ¥ŸÜÿ®Ÿá",Tue:"ÿ≥Ÿá‚Äåÿ¥ŸÜÿ®Ÿá",Wed:"⁄ÜŸáÿßÿ±ÿ¥ŸÜÿ®Ÿá",Thu:"ŸæŸÜÿ¨‚Äåÿ¥ŸÜÿ®Ÿá",Fri:"ÿ¨ŸÖÿπŸá"};function s(t){return t.replace(/\d/g,(t=>"€∞€±€≤€≥€¥€µ€∂€∑€∏€π"[parseInt(t)]))}let c=i.DEFAULT_FONT;function E(){!function(){var t;const e=document.querySelector(".sc-1htxemp-6.jsehgZ"),n=document.querySelector(".sc-vb7gpf-1.jIHpro");if(!e||!n)return;const o=null===(t=e.textContent)||void 0===t?void 0:t.trim();o&&(n.textContent=o,n.setAttribute("dir","rtl"),n.style.fontFamily=`${c}, ${i.SYSTEM_FONTS}`)}(),document.querySelectorAll("[data-grid-date]").forEach((t=>{const e=t.getAttribute("data-grid-date");if(!e)return;const n=new Date(parseInt(e));t.querySelectorAll(".sc-12m9yy-5").forEach(((t,e)=>{const o=new Date(n);o.setDate(o.getDate()+e);const a=r.default.toJalaali(o),l=s(a.jd.toString());if(1===a.jd){const e=i.PERSIAN_MONTHS[a.jm-1];s(a.jy.toString());let n=t.querySelector("strong");n||(n=document.createElement("strong"),t.insertBefore(n,t.firstChild)),n.textContent=` ${e} `,n.style.fontFamily=`${c}, ${i.SYSTEM_FONTS}`,n.style.direction="rtl"}else{const e=t.querySelector("strong");e&&(e.textContent="")}const E=t.querySelector("span");if(E){for(;E.firstChild;)E.removeChild(E.firstChild);E.textContent=l,E.style.fontFamily=`${c}, ${i.SYSTEM_FONTS}`,E.style.direction="rtl"}t.style.direction="rtl"}))}))}function d(){!function(){var t;const e=document.querySelector(".sc-1htxemp-6.jsehgZ");if(!e)return;const n=null===(t=e.textContent)||void 0===t?void 0:t.trim();if(!n)return;const o=n.split(/\s+/);if(o.length<2)return;const l=o[0],E=o.slice(1).join(" "),d=parseInt(E),u=a[l];if(!u||isNaN(d))return void console.warn("Could not parse small calendar header:",n);const T=new Date(d,u-1,1),S=r.default.toJalaali(T),_=i.PERSIAN_MONTHS[S.jm-1],f=s(S.jy.toString());e.textContent=`${_} ${f}`,e.setAttribute("dir","rtl"),e.style.fontFamily=`${c}, ${i.SYSTEM_FONTS}`}(),document.querySelectorAll(".rdp-month_grid td").forEach((t=>{const e=t.getAttribute("data-day");if(e)try{const n=new Date(e);if(isNaN(n.getTime()))return void console.warn("Invalid date string for small calendar day:",e);const o=r.default.toJalaali(n),a=t.querySelector("button");if(!a)return;const l=a.querySelector(".sc-1htxemp-12.gMCvNC");if(!l)return;l.textContent=s(o.jd.toString()),l.style.direction="rtl",l.style.fontFamily=`${c}, ${i.SYSTEM_FONTS}`}catch(t){console.error("Error processing small calendar day:",e,t)}}))}function u(){E(),d(),function(){const t=document.querySelector(".sc-lmxfee-3.iRQjYM");if(!t)return void console.log("Day name container not found.");const e=t.querySelectorAll(".sc-1rt47i1-0.sc-lmxfee-0.habFrR");if(0===e.length)return void console.log("Day name elements not found.");Array.from(e).reverse().forEach((e=>{var n;const o=null===(n=e.textContent)||void 0===n?void 0:n.trim();o&&l[o]?(e.textContent=l[o],e.setAttribute("dir","rtl"),e.style.fontFamily=`${c}, ${i.SYSTEM_FONTS}`):console.warn("Could not translate day name:",o),t.appendChild(e)}))}()}function T(t,e){const n=document.querySelector(t);if(!n)return void console.warn("Observer target not found:",t);new MutationObserver((t=>{e()})).observe(n,{childList:!0,subtree:!0,characterData:!0})}chrome.storage.onChanged.addListener(((t,e)=>{"sync"===e&&(t[i.STORAGE_KEYS.PERSIAN_INPUT]||t[i.STORAGE_KEYS.SELECTED_FONT])&&chrome.storage.sync.get([i.STORAGE_KEYS.PERSIAN_INPUT,i.STORAGE_KEYS.SELECTED_FONT],(t=>{const e=t[i.STORAGE_KEYS.PERSIAN_INPUT];c=t[i.STORAGE_KEYS.SELECTED_FONT]||i.DEFAULT_FONT,e&&(console.log("Storage change detected, running convertCalendar."),u())}))})),chrome.storage.sync.get([i.STORAGE_KEYS.PERSIAN_INPUT,i.STORAGE_KEYS.SELECTED_FONT],(t=>{const e=t[i.STORAGE_KEYS.PERSIAN_INPUT];if(c=t[i.STORAGE_KEYS.SELECTED_FONT]||i.DEFAULT_FONT,e){console.log("Initial load with Persian enabled, running convertCalendar."),u(),T(".sc-1kdlpav-16.hUCMDN",(()=>{console.log("Big calendar container mutation detected."),u()})),T(".sc-1htxemp-14.hBaYBJ",(()=>{console.log("Small calendar container mutation detected."),u()}));let t=null;window.addEventListener("scroll",(()=>{t&&clearTimeout(t),t=window.setTimeout((()=>{chrome.storage.sync.get([i.STORAGE_KEYS.PERSIAN_INPUT],(t=>{t[i.STORAGE_KEYS.PERSIAN_INPUT]&&(console.log("Scroll timeout, running convertCalendar."),u())}))}),300)}),{passive:!0})}else console.log("Initial load with Persian disabled.")}))}},e={};(function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports})(283)})();
//# sourceMappingURL=content.js.map