{"version":3,"file":"background.js","mappings":";;AAAa;AACb;AACA;AACA;AACA,yCAAyC,6BAA6B;AACtE,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,4BAA4B,0BAA0B;AACtD;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,CAAC","sources":["webpack://notion-persian-dates/./src/background/background.ts"],"sourcesContent":["\"use strict\";\n/* background.ts */\nfunction applySettingsToTab(tabId) {\n    chrome.storage.sync.get([\"persianInput\", \"fontInjectionEnabled\", \"selectedFont\"], (data) => {\n        chrome.tabs.sendMessage(tabId, { type: \"applySettings\", data });\n    });\n}\nchrome.tabs.onUpdated.addListener((tabId, changeInfo, tab) => {\n    if (tab.url && tab.url.includes(\"notion.so\") && changeInfo.status === 'complete') {\n        applySettingsToTab(tabId);\n    }\n    else {\n        chrome.action.disable(tabId);\n    }\n});\nchrome.tabs.onActivated.addListener((activeInfo) => {\n    chrome.tabs.get(activeInfo.tabId, (tab) => {\n        if (tab && tab.url && tab.url.includes(\"notion.so\") && tab.id !== undefined) {\n            applySettingsToTab(tab.id);\n        }\n    });\n});\n// Listen for settings changes and update all active Notion tabs\nchrome.storage.onChanged.addListener((changes, namespace) => {\n    if (namespace === 'sync' &&\n        (changes.persianInput || changes.fontInjectionEnabled || changes.selectedFont)) {\n        // Get all Notion tabs and update them\n        chrome.tabs.query({ url: \"*://*.notion.so/*\" }, (tabs) => {\n            tabs.forEach((tab) => {\n                if (tab.id) {\n                    applySettingsToTab(tab.id);\n                }\n            });\n        });\n    }\n});\n"],"names":[],"sourceRoot":""}